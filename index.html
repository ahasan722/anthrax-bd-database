<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anthrax Surveillance & Data Hub | Bangladesh</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #334155; }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container { height: 350px; }
        }
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .active-tab { border-bottom: 2px solid #0ea5e9; color: #0ea5e9; font-weight: 600; }
        .inactive-tab { color: #64748b; }
        .inactive-tab:hover { color: #334155; }
    </style>
    <!-- Chosen Palette: Clinical Earth (Slate, Sky Blue, Alert Red, Amber) -->
    <!-- Application Structure Plan: Dashboard layout with four main views: 1. Overview (Key stats & visual trends), 2. Geographic Analysis (District hotspots), 3. Case Database (Searchable registry), 4. Prevention Protocol (Educational cards). Designed to allow users to move from high-level summary to granular data and finally to actionable advice. -->
    <!-- Visualization & Content Choices: 
         1. Line Chart: Seasonal trends (Goal: Show seasonality of outbreaks).
         2. Bar Chart: Regional distribution (Goal: Highlight Sirajganj/Pabna belt).
         3. Donut Chart: Transmission vectors (Goal: Show primary infection sources).
         4. Interactive Table: The "Database" component allowing filtering of specific outbreak records.
         5. Card Grid: Risk factors and symptoms.
         NO SVG/Mermaid used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-slate-50 min-h-screen flex flex-col">

    <!-- Navigation -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center gap-2">
                        <span class="text-2xl font-bold text-slate-800">Anthrax<span class="text-sky-600">DB</span> BD</span>
                    </div>
                    <div class="hidden sm:ml-8 sm:flex sm:space-x-8">
                        <button onclick="switchView('overview')" id="nav-overview" class="active-tab inline-flex items-center px-1 pt-1 text-sm font-medium h-full transition-colors">Overview</button>
                        <button onclick="switchView('geo')" id="nav-geo" class="inactive-tab inline-flex items-center px-1 pt-1 text-sm font-medium h-full transition-colors">Geographic Data</button>
                        <button onclick="switchView('database')" id="nav-database" class="inactive-tab inline-flex items-center px-1 pt-1 text-sm font-medium h-full transition-colors">Case Registry</button>
                        <button onclick="switchView('prevention')" id="nav-prevention" class="inactive-tab inline-flex items-center px-1 pt-1 text-sm font-medium h-full transition-colors">Protocols</button>
                    </div>
                </div>
                <div class="flex items-center">
                    <span class="px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 animate-pulse">Status: Endemic</span>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div class="sm:hidden flex justify-around border-t border-slate-100 py-2 bg-slate-50">
            <button onclick="switchView('overview')" class="text-xs font-medium text-slate-600">Overview</button>
            <button onclick="switchView('database')" class="text-xs font-medium text-slate-600">Database</button>
            <button onclick="switchView('prevention')" class="text-xs font-medium text-slate-600">Protocols</button>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">

        <!-- VIEW 1: OVERVIEW -->
        <div id="view-overview" class="space-y-6 animate-fade-in">
            <div class="text-center md:text-left">
                <h1 class="text-3xl font-bold text-slate-900">National Situation Report</h1>
                <p class="mt-2 text-slate-600 max-w-3xl">
                    Anthrax is an endemic zoonotic disease in Bangladesh, characterized by recurrent outbreaks primarily in the "Anthrax Belt" (Sirajganj, Pabna, Tangail). 
                    This dashboard aggregates historical data to identify seasonal patterns and risk factors associated with <i>Bacillus anthracis</i>.
                    Human cases are predominantly Cutaneous Anthrax linked to handling infected livestock.
                </p>
            </div>

            <!-- KPI Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="glass-panel p-6 rounded-xl border-l-4 border-sky-500">
                    <div class="text-sm font-medium text-slate-500 uppercase tracking-wider">Primary Hotspot</div>
                    <div class="mt-2 text-3xl font-bold text-slate-900">Sirajganj</div>
                    <div class="text-xs text-slate-500 mt-1">Highest frequency of clusters</div>
                </div>
                <div class="glass-panel p-6 rounded-xl border-l-4 border-amber-500">
                    <div class="text-sm font-medium text-slate-500 uppercase tracking-wider">Peak Seasonality</div>
                    <div class="mt-2 text-3xl font-bold text-slate-900">Aug - Oct</div>
                    <div class="text-xs text-slate-500 mt-1">Correlates with humidity & floods</div>
                </div>
                <div class="glass-panel p-6 rounded-xl border-l-4 border-emerald-500">
                    <div class="text-sm font-medium text-slate-500 uppercase tracking-wider">Transmission</div>
                    <div class="mt-2 text-3xl font-bold text-slate-900">Zoonotic</div>
                    <div class="text-xs text-slate-500 mt-1">Direct contact with livestock</div>
                </div>
                <div class="glass-panel p-6 rounded-xl border-l-4 border-slate-500">
                    <div class="text-sm font-medium text-slate-500 uppercase tracking-wider">Clinical Type</div>
                    <div class="mt-2 text-3xl font-bold text-slate-900">99% Skin</div>
                    <div class="text-xs text-slate-500 mt-1">Cutaneous vs. Gastrointestinal</div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-8">
                <!-- Seasonal Trend Chart -->
                <div class="glass-panel p-6 rounded-xl">
                    <h3 class="text-lg font-semibold text-slate-800 mb-2">Seasonal Outbreak Trends</h3>
                    <p class="text-sm text-slate-500 mb-4">
                        Historical aggregation of reported cases by month. Note the bimodal peaks correlating with pre-monsoon and post-monsoon periods.
                    </p>
                    <div class="chart-container">
                        <canvas id="seasonalityChart"></canvas>
                    </div>
                </div>

                <!-- Transmission Chart -->
                <div class="glass-panel p-6 rounded-xl">
                    <h3 class="text-lg font-semibold text-slate-800 mb-2">Transmission Vectors</h3>
                    <p class="text-sm text-slate-500 mb-4">
                        Primary activities leading to human infection. Slaughtering and processing sick animals remain the highest risk factors.
                    </p>
                    <div class="chart-container">
                        <canvas id="transmissionChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW 2: GEOGRAPHIC DATA -->
        <div id="view-geo" class="hidden space-y-6">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-slate-900">Geographic Distribution</h2>
                <p class="mt-2 text-slate-600">
                    The distribution of Anthrax in Bangladesh is not uniform. The "Anthrax Belt" spans the central-northern districts, where soil conditions (calcareous, alkaline) favor spore survival.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Chart Col -->
                <div class="lg:col-span-2 glass-panel p-6 rounded-xl">
                    <h3 class="text-lg font-semibold text-slate-800 mb-4">Cumulative Case Density by District</h3>
                    <div class="chart-container" style="max-height: 500px; height: 400px;">
                        <canvas id="geoChart"></canvas>
                    </div>
                </div>

                <!-- Info Col -->
                <div class="space-y-4">
                    <div class="glass-panel p-5 rounded-xl bg-red-50 border-red-100">
                        <h4 class="font-bold text-red-900 flex items-center gap-2">
                            <span class="text-xl">⚠️</span> High Risk Zones
                        </h4>
                        <ul class="mt-3 space-y-2 text-sm text-red-800">
                            <li class="flex justify-between border-b border-red-200 pb-1">
                                <span>Sirajganj</span> <span class="font-bold">Extreme</span>
                            </li>
                            <li class="flex justify-between border-b border-red-200 pb-1">
                                <span>Pabna</span> <span class="font-bold">High</span>
                            </li>
                            <li class="flex justify-between border-b border-red-200 pb-1">
                                <span>Tangail</span> <span class="font-bold">High</span>
                            </li>
                            <li class="flex justify-between border-b border-red-200 pb-1">
                                <span>Kushtia</span> <span class="font-bold">Moderate</span>
                            </li>
                        </ul>
                    </div>

                    <div class="glass-panel p-5 rounded-xl">
                        <h4 class="font-bold text-slate-800">Environmental Factors</h4>
                        <p class="text-sm text-slate-600 mt-2">
                            <strong>Soil Type:</strong> Alkaline soils rich in calcium and organic matter promote spore longevity.
                        </p>
                        <p class="text-sm text-slate-600 mt-2">
                            <strong>Flooding:</strong> Recurrent floods wash up deep-buried spores, contaminating grazing fields.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW 3: DATABASE / REGISTRY -->
        <div id="view-database" class="hidden space-y-6">
            <div>
                <h2 class="text-2xl font-bold text-slate-900">Case Registry Database</h2>
                <p class="mt-2 text-slate-600">
                    A searchable repository of notable reported cluster events. This simulated database tracks location, year, and impact metrics.
                </p>
            </div>

            <!-- Filters -->
            <div class="glass-panel p-4 rounded-xl flex flex-col md:flex-row gap-4 items-center justify-between">
                <div class="flex-grow w-full md:w-auto">
                    <label class="block text-xs font-semibold text-slate-500 uppercase mb-1">Search Registry</label>
                    <input type="text" id="searchInput" placeholder="Search district, village, or year..." 
                           class="w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 outline-none">
                </div>
                <div class="w-full md:w-48">
                    <label class="block text-xs font-semibold text-slate-500 uppercase mb-1">Filter by Status</label>
                    <select id="statusFilter" class="w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 outline-none bg-white">
                        <option value="all">All Types</option>
                        <option value="Cutaneous">Cutaneous</option>
                        <option value="Gastrointestinal">Gastrointestinal</option>
                    </select>
                </div>
                <div class="w-full md:w-auto flex items-end">
                    <button onclick="resetFilters()" class="w-full md:w-auto px-4 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium rounded-lg transition-colors">
                        Reset
                    </button>
                </div>
            </div>

            <!-- Table -->
            <div class="glass-panel rounded-xl overflow-hidden overflow-x-auto">
                <table class="min-w-full divide-y divide-slate-200">
                    <thead class="bg-slate-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider cursor-pointer hover:bg-slate-100" onclick="sortTable(0)">Date</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider cursor-pointer hover:bg-slate-100" onclick="sortTable(1)">District</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider cursor-pointer hover:bg-slate-100" onclick="sortTable(2)">Village/Area</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Affected (Human)</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Source</th>
                        </tr>
                    </thead>
                    <tbody id="databaseBody" class="bg-white divide-y divide-slate-200">
                        <!-- JS populated -->
                    </tbody>
                </table>
                <div id="noResults" class="hidden p-8 text-center text-slate-500">
                    No records found matching your criteria.
                </div>
            </div>
            <div class="flex justify-between items-center text-sm text-slate-500 px-2">
                <span>Showing recent significant clusters</span>
                <span>Data Source: Simulated aggregation from public health reports</span>
            </div>
        </div>

        <!-- VIEW 4: PREVENTION -->
        <div id="view-prevention" class="hidden space-y-6">
            <div class="text-center max-w-2xl mx-auto mb-8">
                <h2 class="text-2xl font-bold text-slate-900">Prevention & Safety Protocols</h2>
                <p class="mt-2 text-slate-600">
                    Interrupting the transmission cycle requires a "One Health" approach involving livestock vaccination and public awareness.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Card 1 -->
                <div class="glass-panel rounded-xl overflow-hidden border-t-4 border-sky-500 hover:shadow-lg transition-shadow">
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-slate-900 flex items-center mb-3">
                            <span class="w-8 h-8 rounded-full bg-sky-100 text-sky-600 flex items-center justify-center mr-3 text-sm">1</span>
                            Livestock Vaccination
                        </h3>
                        <p class="text-slate-600 text-sm leading-relaxed">
                            Annual vaccination of cattle, goats, and sheep is the single most effective prevention method. Ring vaccination should be implemented immediately around an outbreak site (within 3-5km radius).
                        </p>
                    </div>
                    <div class="bg-sky-50 px-6 py-3 text-xs font-semibold text-sky-700">
                        Action: Contact Upazila Livestock Officer
                    </div>
                </div>

                <!-- Card 2 -->
                <div class="glass-panel rounded-xl overflow-hidden border-t-4 border-red-500 hover:shadow-lg transition-shadow">
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-slate-900 flex items-center mb-3">
                            <span class="w-8 h-8 rounded-full bg-red-100 text-red-600 flex items-center justify-center mr-3 text-sm">2</span>
                            Safe Disposal
                        </h3>
                        <p class="text-slate-600 text-sm leading-relaxed">
                            Never slaughter a sick animal. Carcasses of animals suspected of Anthrax must be buried 6 feet deep with quicklime. <span class="font-bold">Do not open the carcass</span> as exposure to oxygen triggers spore formation.
                        </p>
                    </div>
                    <div class="bg-red-50 px-6 py-3 text-xs font-semibold text-red-700">
                        Warning: Spores survive in soil for decades
                    </div>
                </div>

                <!-- Card 3 -->
                <div class="glass-panel rounded-xl overflow-hidden border-t-4 border-amber-500 hover:shadow-lg transition-shadow">
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-slate-900 flex items-center mb-3">
                            <span class="w-8 h-8 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center mr-3 text-sm">3</span>
                            Human Symptoms
                        </h3>
                        <p class="text-slate-600 text-sm leading-relaxed">
                            <strong>Cutaneous:</strong> Painless black eschar (scab) surrounded by swelling. <br>
                            <strong>Gastrointestinal:</strong> Severe abdominal pain, vomiting blood, fever.<br>
                            Early treatment with antibiotics (Ciprofloxacin/Doxycycline) is highly effective.
                        </p>
                    </div>
                    <div class="bg-amber-50 px-6 py-3 text-xs font-semibold text-amber-700">
                        Action: Visit Sadar Hospital immediately
                    </div>
                </div>

                <!-- Card 4 -->
                <div class="glass-panel rounded-xl overflow-hidden border-t-4 border-emerald-500 hover:shadow-lg transition-shadow">
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-slate-900 flex items-center mb-3">
                            <span class="w-8 h-8 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center mr-3 text-sm">4</span>
                            Hygiene Protocols
                        </h3>
                        <p class="text-slate-600 text-sm leading-relaxed">
                            Those handling animals must wear protective gloves and masks. Wash hands thoroughly with soap and water after contact. Do not consume meat from animals that died of unknown causes.
                        </p>
                    </div>
                    <div class="bg-emerald-50 px-6 py-3 text-xs font-semibold text-emerald-700">
                        Prevention is cheaper than cure
                    </div>
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-white border-t border-slate-200 mt-auto">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <p class="text-center text-xs text-slate-400">
                Data visualized for educational purposes. Based on typical epidemiological patterns of Anthrax in Bangladesh (2010-2024). <br>
                For emergencies, contact the IEDCR Hotline or local health authorities.
            </p>
        </div>
    </footer>

    <!-- LOGIC -->
    <script>
        // --- 1. STATE & DATA ---
        
        // Mock Database of outbreaks based on real epidemiological patterns
        const outbreakData = [
            { date: "2023-09-15", district: "Sirajganj", area: "Shahjadpur", cases: 14, type: "Cutaneous", source: "Sick Cow Slaughter" },
            { date: "2023-08-22", district: "Sirajganj", area: "Belkuchi", cases: 9, type: "Cutaneous", source: "Handling Meat" },
            { date: "2023-05-10", district: "Pabna", area: "Santhia", cases: 21, type: "Cutaneous", source: "Dead Goat" },
            { date: "2022-10-05", district: "Tangail", area: "Modhupur", cases: 5, type: "Cutaneous", source: "Slaughtering" },
            { date: "2022-09-12", district: "Sirajganj", area: "Kamarkhanda", cases: 32, type: "Cutaneous", source: "Communal Feast" },
            { date: "2022-06-18", district: "Kushtia", area: "Kumarkhali", cases: 3, type: "Gastrointestinal", source: "Undercooked Meat" },
            { date: "2021-08-30", district: "Sirajganj", area: "Ullapara", cases: 11, type: "Cutaneous", source: "Sick Cattle" },
            { date: "2021-05-25", district: "Rajshahi", area: "Bagmara", cases: 7, type: "Cutaneous", source: "Handling Hides" },
            { date: "2020-10-12", district: "Pabna", area: "Bera", cases: 18, type: "Cutaneous", source: "Sick Cow" },
            { date: "2020-09-04", district: "Sirajganj", area: "Chauhali", cases: 6, type: "Cutaneous", source: "Processing Meat" },
            { date: "2019-11-02", district: "Meherpur", area: "Gangni", cases: 4, type: "Cutaneous", source: "Unknown" },
            { date: "2019-08-15", district: "Sirajganj", area: "Shahjadpur", cases: 25, type: "Cutaneous", source: "Sick Cow Slaughter" }
        ];

        let currentSort = { col: 0, asc: false };

        // --- 2. NAVIGATION LOGIC ---
        function switchView(viewId) {
            // Hide all views
            ['overview', 'geo', 'database', 'prevention'].forEach(id => {
                document.getElementById(`view-${id}`).classList.add('hidden');
                const btn = document.getElementById(`nav-${id}`);
                if(btn) { // Desktop nav
                    btn.classList.remove('active-tab');
                    btn.classList.add('inactive-tab');
                }
            });

            // Show selected view
            document.getElementById(`view-${viewId}`).classList.remove('hidden');
            const activeBtn = document.getElementById(`nav-${viewId}`);
            if(activeBtn) {
                activeBtn.classList.remove('inactive-tab');
                activeBtn.classList.add('active-tab');
            }

            // Trigger chart resize if needed
            if (viewId === 'overview' || viewId === 'geo') {
                setTimeout(() => {
                    Object.values(charts).forEach(chart => chart.resize());
                }, 10);
            }
        }

        // --- 3. DATABASE LOGIC ---
        const tableBody = document.getElementById('databaseBody');
        const searchInput = document.getElementById('searchInput');
        const statusFilter = document.getElementById('statusFilter');
        const noResults = document.getElementById('noResults');

        function renderTable(data) {
            tableBody.innerHTML = '';
            
            if (data.length === 0) {
                noResults.classList.remove('hidden');
                return;
            } else {
                noResults.classList.add('hidden');
            }

            data.forEach(row => {
                const tr = document.createElement('tr');
                tr.className = 'hover:bg-slate-50 transition-colors';
                
                // Color code the type
                const typeClass = row.type === 'Gastrointestinal' 
                    ? 'bg-red-100 text-red-800' 
                    : 'bg-green-100 text-green-800';

                tr.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-600 font-medium">${row.date}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-800 font-bold">${row.district}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-600">${row.area}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-600">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-800">
                            ${row.cases}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-500">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${typeClass}">
                            ${row.type}
                        </span>
                        <span class="ml-2 text-xs text-slate-400 block mt-1">${row.source}</span>
                    </td>
                `;
                tableBody.appendChild(tr);
            });
        }

        function filterData() {
            const query = searchInput.value.toLowerCase();
            const type = statusFilter.value;

            const filtered = outbreakData.filter(item => {
                const matchesSearch = 
                    item.district.toLowerCase().includes(query) || 
                    item.area.toLowerCase().includes(query) ||
                    item.date.includes(query);
                const matchesType = type === 'all' || item.type === type;
                
                return matchesSearch && matchesType;
            });

            // Sort logic
            filtered.sort((a, b) => {
                let valA, valB;
                if (currentSort.col === 0) { // Date
                    valA = new Date(a.date);
                    valB = new Date(b.date);
                } else if (currentSort.col === 1) { // District
                    valA = a.district;
                    valB = b.district;
                } else { // Village
                    valA = a.area;
                    valB = b.area;
                }

                if (valA < valB) return currentSort.asc ? -1 : 1;
                if (valA > valB) return currentSort.asc ? 1 : -1;
                return 0;
            });

            renderTable(filtered);
        }

        function sortTable(colIndex) {
            if (currentSort.col === colIndex) {
                currentSort.asc = !currentSort.asc;
            } else {
                currentSort.col = colIndex;
                currentSort.asc = true;
            }
            filterData();
        }

        function resetFilters() {
            searchInput.value = '';
            statusFilter.value = 'all';
            filterData();
        }

        // Listeners
        searchInput.addEventListener('input', filterData);
        statusFilter.addEventListener('change', filterData);

        // --- 4. CHARTS LOGIC ---
        const charts = {};

        function initCharts() {
            // Common Config
            Chart.defaults.font.family = "'Inter', sans-serif";
            Chart.defaults.color = '#64748b';

            // 1. Seasonality Line Chart
            const ctxSeason = document.getElementById('seasonalityChart').getContext('2d');
            charts.season = new Chart(ctxSeason, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [{
                        label: 'Avg. Reported Clusters',
                        data: [2, 1, 3, 15, 25, 12, 8, 35, 42, 38, 10, 4],
                        borderColor: '#0ea5e9', // Sky 500
                        backgroundColor: 'rgba(14, 165, 233, 0.1)',
                        borderWidth: 3,
                        tension: 0.4,
                        fill: true,
                        pointBackgroundColor: '#ffffff',
                        pointBorderColor: '#0ea5e9',
                        pointRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(15, 23, 42, 0.9)',
                            padding: 12,
                            titleFont: { size: 13 },
                            bodyFont: { size: 13 }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { borderDash: [2, 2], color: '#e2e8f0' },
                            title: { display: true, text: 'Cluster Frequency' }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });

            // 2. Transmission Donut Chart
            const ctxTrans = document.getElementById('transmissionChart').getContext('2d');
            charts.trans = new Chart(ctxTrans, {
                type: 'doughnut',
                data: {
                    labels: ['Slaughtering Sick Animals', 'Handling Raw Meat', 'Processing Skins/Hides', 'Consuming Meat', 'Environmental Contact'],
                    datasets: [{
                        data: [45, 25, 15, 10, 5],
                        backgroundColor: [
                            '#ef4444', // Red 500
                            '#f97316', // Orange 500
                            '#eab308', // Yellow 500
                            '#10b981', // Emerald 500
                            '#64748b'  // Slate 500
                        ],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right', labels: { boxWidth: 12, usePointStyle: true } }
                    },
                    layout: { padding: 20 }
                }
            });

            // 3. Geographic Bar Chart
            const ctxGeo = document.getElementById('geoChart').getContext('2d');
            charts.geo = new Chart(ctxGeo, {
                type: 'bar',
                data: {
                    labels: ['Sirajganj', 'Pabna', 'Tangail', 'Kushtia', 'Rajshahi', 'Meherpur', 'Others'],
                    datasets: [{
                        label: 'Historical Cases (Est.)',
                        data: [450, 280, 150, 90, 60, 40, 30],
                        backgroundColor: [
                            '#0369a1', // Sky 700
                            '#0ea5e9', // Sky 500
                            '#38bdf8', // Sky 400
                            '#7dd3fc', // Sky 300
                            '#bae6fd', // Sky 200
                            '#e0f2fe', // Sky 100
                            '#f1f5f9'  // Slate 100
                        ],
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { borderDash: [2, 2], color: '#e2e8f0' }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });
        }

        // --- INIT ---
        window.addEventListener('DOMContentLoaded', () => {
            initCharts();
            renderTable(outbreakData);
        });

    </script>
</body>
</html>